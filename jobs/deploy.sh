#!/bin/bash

set -e

command_exists() {
    command -v "$1" >/dev/null 2>&1
}

ascii_art() {
    cat << "EOF"








                                                                                           ###**###
                           ####*#                                                         *+*##**#*####*
                     ####***+**+**                                                        **+*#+**#*#########
                 *###*#**#****+##*                #####*     *#######                    *++#+**+#+*#+##**#######
            *###*#*****+*++*#**++**             ## ### ###  ## ###* ##                   ***+#+**+#+**+#+*#*#**#**###*
        *######*#+**+#+*#*+*+****+*#           *# ###*  *#+## ####   ##                 *++#*+#+**+#+**+#+*#+#++#**#*#**###
     #####**#+*#+#++#+**+**+******+**          ## ######+#++#*######*#*                 ###+#+**+#+**+#++#+*#=#++#+=*+*****##
   ###*##+#*+#*+#+*#+#**#+**+#****+##           ## *#####*  *##  + ##*          **        *******+#+**+#+*#+#*=#+*#*#+#*+*=*#
  ##**#+*#+*#+*#+#*+#+*#+#+***+*                 *######      *####*           **  #*          **+#*+**+#+*#+#*+#++*=*#**+#*
   ****#*+#*+#*+#+*#+****+***                      ####        +###            #  #        *#####* *##***#+*#+#+*#***##=++**
    **#+**+*#+*#+#**#+******                       *###        *###           *  #      *###**##       *#+****+#*+*=##***#*
    ***#**#**#**###*   *##*###*                     ##*        ####           #  #     ##****##            *****#+*#+#**+**
     **+*#+*+*#          ##***##*                   ###        ###            *  #    ##****##*         *####   +**#****##
      ##+* *#            *##****##                  ####       ###                   ##*****##  + +#######*#*
           *######*+#*   ###*****#*                  ###      ###*                   #******##########***+##
            #+**#########*##******#                 #############                   =#******###*********=*#
            *#=+*******####*******#               ###**##*******##*                  #****************+=##
             *#+=****************##            ###****************###              *###*************+=*#*
               ##==**************#           *##*********########***###         ###****##********==*##
                *##+=+*********######*     ###*********#**********#****##    *#*******+#*##########*
                   *####**#####*******##*##****************************+*## ##********##
                              ##********##***************########********++##******##*
                               *##*******##****************#####*********++#######*
                                  *########*******************#*********++##
                                       ##******************************++######*#*######
                            *##############***************************+*######*******#*##
                           ##**#*****##########*********************+*#################**#
                          ##*##**###******#########****************#########***#*##* *#***#*
                         #***#* ##*######******#######******######*     *#**#* #**+#* *#**+#*
                       ##**##  #***# *#########       **###*#+           ##*+#* #***#   ##**#*
                       ####*  #***#* #***#                                 ###* +#***#   ##*#
                       ##*#  ##**#* ##**#*                                 #*#+   ##*##  #*##
                       *###  #*##* *#+*##                                  #*#    #*+#   #*#*
                        ###  #**#  ##+*#                                   ##     #*#*   ###
                        *##  ##*#   #*##                                   #      ###    ## ***#############################
                          *   ###   ##*#                                 *###*########################################*
                               ##*   ####                  =*################################################**
                                **    ###   *########################################################**
                               ##*######################################################**
                     *##################################################***##*
           *################################################**###*** #*###*
      *################################***         ############## ###########
          +******+=                               *#################*#####*###+
                                                  ################*#########*##
                                                  ############*##*###########*##
                                                  ########################### ##
                                                   ##########*##*############ ##
                                                   *#########*##############**#*
                                                     #########*##*##########*##
                                                       #*######*###*#####**###
                                                            +###############*
                                                                    *###*


┌─────────────────────────────────────────────────────────────────────┐
│  ____            _         ____        _                            │
│ |  _ \ _   _ ___| |_ _   _| __ )  __ _| | __ _ _ __   ___ ___ _ __  │
│ | |_) | | | / __| __| | | |  _ \ / _` | |/ _` | '_ \ / __/ _ \ '__| │
│ |  _ <| |_| \__ \ |_| |_| | |_) | (_| | | (_| | | | | (_|  __/ |    │
│ |_| \_\\__,_|___/\__|\__, |____/ \__,_|_|\__,_|_| |_|\___\___|_|    │
│                      |___/                                          │
└─────────────────────────────────────────────────────────────────────┘




EOF
}

if [[ "$(uname -s)" == "Linux" ]]; then
    if command_exists docker; then
        DOCKER_COMPOSE="docker compose"
        echo "Using docker compose for Docker operations on Linux..."
    else
        echo "Docker is not installed. Please install Docker."
        exit 1
    fi
else
    if command_exists docker-compose; then
        DOCKER_COMPOSE="docker-compose"
        echo "Using docker-compose for Docker operations..."
    else
        echo "docker-compose is not installed. Please install docker-compose."
        exit 1
    fi
fi

echo "Building Docker containers..."
ascii_art &
$DOCKER_COMPOSE build

echo "Starting Docker containers..."
$DOCKER_COMPOSE up
