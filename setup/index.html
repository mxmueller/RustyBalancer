<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="generator" content="mkdocs-1.6.1, mkdocs-terminal-4.6.0">
     
    
    <meta name="author" content="ntno"> 
    
    <link rel="canonical" href="https://mxmueller.github.io/rustybalancer/setup/"><link rel="icon" type="image/png" sizes="192x192" href="../img/android-chrome-192x192.png" />
<link rel="icon" type="image/png" sizes="512x512" href="../img/android-chrome-512x512.png" />
<link rel="apple-touch-icon" sizes="180x180" href="../img/apple-touch-icon.png" />
<link rel="shortcut icon" type="image/png" sizes="48x48" href="../img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="../img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="../img/favicon-32x32.png" />


    
 
<title>Setup - RustyBalancer Docs</title>


<link href="../css/fontawesome/css/fontawesome.min.css" rel="stylesheet">
<link href="../css/fontawesome/css/solid.min.css" rel="stylesheet">
<link href="../css/normalize.css" rel="stylesheet">
<link href="../css/terminal.css" rel="stylesheet">
<link href="../css/theme.css" rel="stylesheet">
<link href="../css/theme.tile_grid.css" rel="stylesheet">
<link href="../css/theme.footer.css" rel="stylesheet">
<!-- pink color palette -->
<link href="../css/palettes/pink.css" rel="stylesheet">

<!-- page layout -->
<style>
/* initially set page layout to a one column grid */
.terminal-mkdocs-main-grid {
    display: grid;
    grid-column-gap: 1.4em;
    grid-template-columns: auto;
    grid-template-rows: auto;
}

/*  
*   when side navigation is not hidden, use a two column grid.  
*   if the screen is too narrow, fall back to the initial one column grid layout.
*   in this case the main content will be placed under the navigation panel. 
*/
@media only screen and (min-width: 70em) {
    .terminal-mkdocs-main-grid {
        grid-template-columns: 4fr 9fr;
    }
}</style>



     
    
    

    
    <!-- search css support -->
<link href="../css/search/bootstrap-modal.css" rel="stylesheet">
<!-- search scripts -->
<script>
    var base_url = "..",
    shortcuts = "{}";
</script>
<script src="../js/jquery/jquery-1.10.1.min.js" defer></script>
<script src="../js/bootstrap/bootstrap.min.js" defer></script>
<script src="../js/mkdocs/base.js" defer></script>
    
    
    
    
    <script src="../search/main.js"></script>
    

    
</head>

<body class="terminal"><div class="container">
    <div class="terminal-nav">
        <header class="terminal-logo">
            <div id="mkdocs-terminal-site-name" class="logo terminal-prompt"><a href="https://mxmueller.github.io/rustybalancer/" class="no-style">RustyBalancer Docs</a></div>
        </header>
        
        <nav class="terminal-menu">
            
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href=".." class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Home</span>
                    </a>
                    <meta property="position" content="0">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="./" class="menu-item active" property="item" typeof="WebPage">
                        <span property="name">Setup</span>
                    </a>
                    <meta property="position" content="1">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../env/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Environment</span>
                    </a>
                    <meta property="position" content="2">
                </li>
                
                
                
                
                
                    
                    


<li property="itemListElement" typeof="ListItem">
    <a href="#" class="menu-item" data-toggle="modal" data-target="#mkdocs_search_modal" property="item" typeof="SearchAction">
        <i aria-hidden="true" class="fa fa-search"></i> <span property="name">Search</span>
    </a>
    <meta property="position" content="3">
</li>
                    
            </ul>
            
        </nav>
    </div>
</div>
        
    <div class="container">
        <div class="terminal-mkdocs-main-grid"><aside id="terminal-mkdocs-side-panel"><nav>
  
    <ul class="terminal-mkdocs-side-nav-items">
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="..">Home</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        <span class="

    terminal-mkdocs-side-nav-item--active">Setup</span>
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../env/">Environment</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        
            
            
                
                
        

             
            
    
        
        <a class="

    terminal-mkdocs-side-nav-item" href="../components/">Components</a>
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            
                
                
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../components/balancer/">Balancer</a>
        
    
    </li>
            
        
            
            
                
                
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../components/deployment-agent/">Deployment Agent</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        
            
            
                
                
        

             
            
    
        
        <a class="

    terminal-mkdocs-side-nav-item" href="../tutorial/">Demo</a>
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            
                
                
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../tutorial/setup/">Setup Process</a>
        
    
    </li>
            
        
            
            
                
                
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../tutorial/startup/">Starting the System</a>
        
    
    </li>
            
        
            
            
                
                
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../tutorial/components/">Key Components</a>
        
    
    </li>
            
        
            
            
                
                
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../tutorial/traffic/">High Traffic Behavior</a>
        
    
    </li>
            
        
            
            
                
                
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../tutorial/load/">Load Testing</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
    </ul>
  
</nav><hr>
<nav>
    <ul>
        <li><a href="#setup">Setup</a></li>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#configuration-files">Configuration Files</a></li><li><a href="#usage">Usage</a></li>
    </ul>
</nav>
</aside>
            <main id="terminal-mkdocs-main-content">
<section id="mkdocs-terminal-content">
    <div><h1 id="setup">Setup</h1>
<p>Welcome to RustyBalancer!</p>
<p>Follow the instructions and get familiar with the environment variables to properly get your workflow going.</p>
<p>Have fun! ðŸ¦€</p>
<hr>
<p><strong>Clone the repository:</strong></p>
<p>To set up the project, you need to clone the main repository. <br>
Choose the method that best suits your needs. If you're setting up for development or testing, cloning with submodules is recommended to ensure you have all the necessary components. <br>
You have two options:</p>
<ul>
<li><strong>Basic Clone:</strong> <br>
   This method will clone only the main repository. It's sufficient if you only need the core codebase.
   Use the following commands to clone the repository and navigate into it:</li>
</ul>
<pre><code class="language-shell">git clone https://github.com/mxmueller/RustyBalancer.git
</code></pre>
<ul>
<li><strong>Clone with Submodules:</strong> <br>
   If you also need the test suite for automated testing, you should clone the repository with its submodules. 
   The submodule <code>rustybalancer-test-suite</code> includes automated test cases for <a href="https://github.com/mxmueller/rustybalancer-test-suite/blob/main/http-stress/README.md">HTTP Stress Tests</a> and <a href="https://github.com/mxmueller/rustybalancer-test-suite/tree/main/qr-code">QR Code Generator Stress Tests</a>. <br> <br>
   These tests are crucial for validating the performance and reliability of your setup.
   Cloning with submodules ensures that you have the necessary test cases integrated into your project for thorough testing and validation. <br> <br>
   Use the following commands to clone the repository along with its submodules: <br></li>
</ul>
<pre><code class="language-bash">git clone --recursive https://github.com/mxmueller/RustyBalancer.git
</code></pre>
<p><strong>Add current user to Docker group (if needed):</strong></p>
<pre><code class="language-bash">sudo usermod -aG docker $USER
</code></pre>
<p>This repository contains Docker Compose configurations for different environments: production, development, and a slim environment. 
The <code>run.sh</code> script located in the <code>jobs</code> directory allows you to easily build and start Docker containers for the specified environment.</p>
<h1 id="prerequisites">Prerequisites</h1>
<p>Docker must be installed on your system. You can download it from <a href="https://www.docker.com/products/docker-desktop">Docker's official site</a>.
If you are using macOS or Windows, <code>docker-compose</code> must also be installed. On Linux, <code>docker compose</code> (the Docker CLI plugin) is preferred.</p>
<h2 id="configuration-files">Configuration Files</h2>
<p><code>docker-compose.yaml</code>:</p>
<p>This file is designed to be used in a production environment where performance, reliability, and security are the primary concerns.
It typically includes optimizations and configurations suited for a live production system.</p>
<p>Includes the following services: redis, deployment-agent, dashboard, and balancer.</p>
<p><code>docker-compose.dev.yaml</code>: </p>
<p>Ideal for developers who need a local environment for building and testing the application. 
This configuration file typically includes settings that make it easier to debug and iterate on the code without affecting the production setup.</p>
<p>Includes all the services present in docker-compose.yaml: redis, deployment-agent, dashboard, and balancer.
Includes the redis-insight service, which provides a Redis management tool.
Includes more environment variables and configurations for the deployment-agent service and various scaling-related settings.</p>
<p><code>docker-compose.slim.yaml</code>: </p>
<p>Suitable for environments where resources are limited, such as in constrained or embedded systems.
This configuration helps to run the application with minimal overhead, making it ideal for testing or deployment in resource-constrained environments.</p>
<p>Includes a lightweight setup without the dashboard and redis-insight service.
Includes the same environment variables and configurations for the deployment-agent service as docker-compose.dev.yml.</p>
<h2 id="usage">Usage</h2>
<p>The <code>run.sh</code> script is used to build and start the Docker containers. It takes a flag <code>-e</code> to specify the environment (<code>prod</code>, <code>dev</code>, or <code>slim</code>).</p>
<h3 id="running-the-script">Running the Script</h3>
<p>Navigate to the <code>jobs</code> directory:</p>
<pre><code class="language-shell">cd jobs
</code></pre>
<p>Make the script executable (if it isn't already):</p>
<pre><code class="language-shell">chmod +x run.sh
</code></pre>
<p><strong>Run the script with the desired environment:</strong></p>
<p>For the production environment:</p>
<pre><code class="language-shell">./run.sh -e prod
</code></pre>
<p>For the development environment:</p>
<pre><code class="language-shell">./run.sh -e dev
</code></pre>
<p>For the slim environment:</p>
<pre><code class="language-shell">./run.sh -e slim
</code></pre>
<h3 id="script-explanation">Script Explanation</h3>
<p>The <code>run.sh</code> script checks for the operating system and determines whether to use <code>docker compose</code> or <code>docker-compose</code> based on the system's available commands. It then processes the <code>-e</code> flag to determine which Docker Compose files to use.</p>
<p>Here's the logic breakdown:</p>
<p><strong>OS and Command Check</strong>:</p>
<p><strong>Linux:</strong> <br>
Checks if <code>docker</code> is installed and uses <code>docker compose</code>.</p>
<p><strong>Other Systems:</strong> <br>
Checks if <code>docker-compose</code> is installed and uses <code>docker-compose</code>.</p>
<p><strong>Environment Selection</strong>: <br>
Based on the <code>-e</code> flag, it sets the appropriate Docker Compose files:
     - <code>prod</code>: Uses <code>docker-compose.yaml</code>
     - <code>dev</code>: Uses <code>docker-compose.yaml</code> and <code>docker-compose.dev.yaml</code>
     - <code>slim</code>: Uses <code>docker-compose.yaml</code> and <code>docker-compose.slim.yaml</code></p>
<p><strong>Build and Start Containers</strong>: <br>
The script builds and starts the Docker containers using the selected configuration files.</p></div>
</section>

            </main>
        </div>
        <hr><footer>
    <div class="terminal-mkdocs-footer-grid">
        <div id="terminal-mkdocs-footer-copyright-info">
            
            <p class="text-center text-muted">Copyright 2024 Berger, Mueller. All rights reserved</p>
             Site built with <a href="http://www.mkdocs.org">MkDocs</a> and <a href="https://github.com/ntno/mkdocs-terminal">Terminal for MkDocs</a>.
        </div>
        <div id="terminal-mkdocs-footer-prev-next">
            <nav class="btn-group">
                <a href=".." title="Home">Previous</a>
                |
                <a href="../env/" title="Environment">Next</a>
            </nav>
        </div>
    </div>
</footer>
    </div>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="alertdialog" aria-modal="true" aria-labelledby="searchModalLabel">
    <div class="modal-dialog modal-lg" role="search">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="searchModalLabel">Search</h5>
                <button type="button" class="close btn btn-default btn-ghost" data-dismiss="modal"><span aria-hidden="true">x</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p id="searchInputLabel">Type to start searching</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" aria-labelledby="searchInputLabel" placeholder="" id="mkdocs-search-query" title="Please enter search terms here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No document matches found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    
    
</body>

</html>